<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <title>无跳动分页示例</title>
  <style>
    body{
      font-family:Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,Arial,sans-serif;
      background:#f8f9fa;
      margin:0;
      padding:30px;
    }
    h1{
      text-align:center;
      color:#2c3e50;
      margin-bottom:30px;
    }
    .pagination{
      display:flex;
      justify-content:center;
      align-items:center;
      gap:8px;
      margin-top:30px;
      flex-wrap:wrap;
    }
    .pagination button{
      padding:8px 12px;
      border:1px solid #ddd;
      background:#fff;
      border-radius:4px;
      cursor:pointer;
      transition:all .3s;
      min-width:40px;
    }
    .pagination button:hover:not(:disabled){
      background:#3498db;
      color:#fff;
      border-color:#3498db;
    }
    .pagination button:disabled{
      cursor:not-allowed;
      opacity:.5;
      background:#ecf0f1;
    }
    .pagination button.active{
      background:#3498db;
      color:#fff;
      border-color:#3498db;
      font-weight:bold;
    }
    .stats{
      text-align:center;
      margin:20px 0;
      color:#7f8c8d;
      font-size:14px;
    }
    .article-container{
      position:relative;
      min-height:600px;
      transition:height .3s ease;
    }
    .article-page{
      position:absolute;
      top:0;
      left:0;
      width:100%;
      opacity:0;
      pointer-events:none;
      transition:opacity .3s ease;
    }
    .article-page.active{
      position:relative;
      opacity:1;
      pointer-events:auto;
    }
    .article{
      background:#fff;
      padding:20px;
      margin-bottom:15px;
      border-radius:8px;
      box-shadow:0 2px 4px rgba(0,0,0,.1);
    }
    .article h3{
      margin:0 0 10px;
      color:#2c3e50;
      border-left:4px solid #3498db;
      padding-left:10px;
    }
    .article p{
      margin:0;
      color:#7f8c8d;
      line-height:1.6;
    }
    code{
      background:#f4f4f4;
      padding:2px 4px;
      border-radius:3px;
      font-family:Courier New,monospace;
    }
  </style>
</head>
<body>

  <h1>文章列表</h1>
  <div class="stats" id="stats"></div>

  <!-- 原始文章（会被JS移走并分页） -->
  <div id="articles">
    <div class="article">
      <h3>【置顶】关于杂谈的内容</h3>
      <p>创建时间：2024-12-23<br>分类：杂谈</p>
    </div>
    <div class="article">
      <h3>如何使用 <code>find</code> 查找文件并删除 <code>WAVECAR</code></h3>
      <p>创建时间：2025-10-29<br>分类：材料计算</p>
    </div>
    <div class="article">
      <h3>如何结合CP2K+Multiwfn做ELF拓扑分析</h3>
      <p>创建时间：2025-10-27<br>分类：材料计算</p>
    </div>
    <div class="article">
      <h3><font color="#881188">祝Roselia主唱凑友希那生日快乐！！</font></h3>
      <p>创建时间：2025-10-26<br>分类：BanG Dream!</p>
    </div>
    <div class="article">
      <h3>志崎桦音照片（2）</h3>
      <p>创建时间：2025-10-20<br>分类：BanG Dream!</p>
    </div>
    <div class="article">
      <h3>服务器终端程序MobaXterm安装包</h3>
      <p>创建时间：2025-09-10<br>分类：材料计算</p>
    </div>
    <div class="article">
      <h3>non酱の照片1</h3>
      <p>创建时间：2025-07-26<br>分类：BanG Dream!</p>
    </div>
    <div class="article">
      <h3>VASP计算技巧总结</h3>
      <p>创建时间：2025-06-15<br>分类：材料计算</p>
    </div>
    <div class="article">
      <h3>BanG Dream!演唱会回顾</h3>
      <p>创建时间：2025-05-20<br>分类：BanG Dream!</p>
    </div>
    <div class="article">
      <h3>Linux系统管理技巧</h3>
      <p>创建时间：2025-04-10<br>分类：技术分享</p>
    </div>
  </div>

  <!-- 分页容器 -->
  <div class="article-container" id="articleContainer"></div>

  <!-- 分页控制 -->
  <div class="pagination" id="pagination">
    <button id="firstPage">首页</button>
    <button id="prevPage">上一页</button>
    <div class="page-numbers" id="pageNumbers"></div>
    <button id="nextPage">下一页</button>
    <button id="lastPage">末页</button>
  </div>

  <script>
    class SmoothPagination {
      constructor(){
        this.sourceArticles=Array.from(document.querySelectorAll('#articles .article'));
        this.itemsPerPage=7;
        this.totalPages=Math.ceil(this.sourceArticles.length/this.itemsPerPage);
        this.currentPage=this.getPageFromUrl();
        this.container=document.getElementById('articleContainer');
        this.maxVisiblePages=5;
        this.pages=[];
        this.init();
      }
      init(){
        this.createPages();
        this.bindEvents();
        this.showPage(this.currentPage);
        window.addEventListener('popstate',()=>this.showPage(this.getPageFromUrl()));
      }
      getPageFromUrl(){
        const p=new URLSearchParams(location.search);
        const page=parseInt(p.get('page'))||1;
        return Math.max(1,Math.min(page,this.totalPages));
      }
      setPageToUrl(page){
        const url=new URL(location.href);
        url.searchParams.set('page',page);
        window.history.pushState({page},'',url);
      }
      createPages(){
        this.sourceArticles.forEach(a=>a.remove());
        for(let i=0;i<this.totalPages;i++){
          const pageDiv=document.createElement('div');
          pageDiv.className='article-page';
          const start=i*this.itemsPerPage;
          const end=start+this.itemsPerPage;
          this.sourceArticles.slice(start,end).forEach(art=>pageDiv.appendChild(art.cloneNode(true)));
          this.container.appendChild(pageDiv);
          this.pages.push(pageDiv);
        }
      }
      showPage(page){
        if(page<1||page>this.totalPages)return;
        this.pages.forEach(p=>p.classList.remove('active'));
        const target=this.pages[page-1];
        target.classList.add('active');
        this.container.style.height=target.offsetHeight+'px';
        this.currentPage=page;
        this.setPageToUrl(page);
        this.updateControls();
        this.updateStats();
        window.scrollTo({top:0,behavior:'smooth'});
      }
      updateControls(){
        document.getElementById('firstPage').disabled=this.currentPage===1;
        document.getElementById('prevPage').disabled=this.currentPage===1;
        document.getElementById('nextPage').disabled=this.currentPage===this.totalPages;
        document.getElementById('lastPage').disabled=this.currentPage===this.totalPages;
        this.renderPageNumbers();
      }
      renderPageNumbers(){
        const container=document.getElementById('pageNumbers');
        container.innerHTML='';
        const pages=this.getPageNumbers();
        pages.forEach(p=>{
          if(p==='ellipsis'){
            const span=document.createElement('span');
            span.className='ellipsis';
            span.textContent='...';
            container.appendChild(span);
          }else{
            const btn=document.createElement('button');
            btn.textContent=p;
            btn.classList.toggle('active',p===this.currentPage);
            btn.addEventListener('click',()=>this.showPage(p));
            container.appendChild(btn);
          }
        });
      }
      getPageNumbers(){
        const pages=[];
        const half=Math.floor(this.maxVisiblePages/2);
        let start=Math.max(1,this.currentPage-half);
        let end=Math.min(this.totalPages,start+this.maxVisiblePages-1);
        if(end-start+1<this.maxVisiblePages)start=Math.max(1,end-this.maxVisiblePages+1);
        if(start>1){pages.push(1);if(start>2)pages.push('ellipsis');}
        for(let i=start;i<=end;i++)pages.push(i);
        if(end<this.totalPages){
            if(end<this.totalPages-1)pages.push('ellipsis');
            pages.push(this.totalPages);
        }
        return pages;
        }
        updateStats(){
        const start=(this.currentPage-1)*this.itemsPerPage+1;
        const end=Math.min(start+this.itemsPerPage-1,this.sourceArticles.length);
        document.getElementById('stats').textContent=`显示第${start} - ${end}条，共${this.sourceArticles.length}条记录`;
        }
        bindEvents(){
        document.getElementById('firstPage').onclick=()=>this.showPage(1);
        document.getElementById('prevPage').onclick=()=>this.showPage(this.currentPage-1);
        document.getElementById('nextPage').onclick=()=>this.showPage(this.currentPage+1);
        document.getElementById('lastPage').onclick=()=>this.showPage(this.totalPages);
        }
        }
        document.addEventListener('DOMContentLoaded',()=>new SmoothPagination());
</script>
</html>